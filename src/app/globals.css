@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-background text-foreground font-body;
    font-feature-settings: "rlig" 1, "calt" 1;
    letter-spacing: 0.05em;
    position: relative;
  }

  /* Global scanlines overlay */
  body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0, 0, 0, 0.3) 2px,
      rgba(0, 0, 0, 0.3) 4px
    );
    z-index: 9999;
    opacity: 0.5;
  }

  /* Reduced motion - disable scanlines and animations */
  @media (prefers-reduced-motion: reduce) {
    body::after {
      display: none;
    }
    
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Headings */
  h1, h2, h3, h4, h5, h6 {
    @apply font-heading uppercase tracking-widest font-bold;
  }

  h1 {
    @apply text-6xl md:text-7xl lg:text-8xl font-black;
  }

  h2 {
    @apply text-4xl md:text-5xl font-bold;
  }

  h3 {
    @apply text-2xl md:text-3xl;
  }

  h4 {
    @apply text-xl md:text-2xl;
  }

  /* Code and monospace elements */
  code, pre {
    @apply font-mono text-sm;
  }

  /* Links */
  a {
    @apply transition-colors duration-150 ease-out;
  }

  /* Selection */
  ::selection {
    @apply bg-accent text-background;
  }
}

@layer components {
  /* Chamfered corner utility */
  .cyber-chamfer {
    clip-path: polygon(
      0 10px,
      10px 0,
      calc(100% - 10px) 0,
      100% 10px,
      100% calc(100% - 10px),
      calc(100% - 10px) 100%,
      10px 100%,
      0 calc(100% - 10px)
    );
  }

  .cyber-chamfer-sm {
    clip-path: polygon(
      0 6px,
      6px 0,
      calc(100% - 6px) 0,
      100% 6px,
      100% calc(100% - 6px),
      calc(100% - 6px) 100%,
      6px 100%,
      0 calc(100% - 6px)
    );
  }

  /* Terminal input prefix */
  .terminal-input {
    @apply relative;
  }

  .terminal-input::before {
    content: '>';
    @apply absolute left-3 top-1/2 -translate-y-1/2 text-accent font-mono;
  }

  .terminal-input input {
    @apply pl-8;
  }

  /* Glitch effect class */
  .cyber-glitch {
    position: relative;
    animation: glitch 0.3s ease-in-out infinite;
  }

  .cyber-glitch::before,
  .cyber-glitch::after {
    content: attr(data-text);
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
  }

  .cyber-glitch::before {
    animation: glitch 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) -0.1s infinite;
    color: #ff00ff;
    z-index: -1;
    text-shadow: -2px 0 #ff00ff;
  }

  .cyber-glitch::after {
    animation: glitch 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) -0.2s infinite;
    color: #00d4ff;
    z-index: -2;
    text-shadow: 2px 0 #00d4ff;
  }

  /* Neon text effect */
  .neon-text {
    color: #00ff88;
    text-shadow: 0 0 10px rgba(0, 255, 136, 0.5), 0 0 20px rgba(0, 255, 136, 0.3);
  }

  .neon-text-secondary {
    color: #ff00ff;
    text-shadow: 0 0 10px rgba(255, 0, 255, 0.5), 0 0 20px rgba(255, 0, 255, 0.3);
  }

  .neon-text-tertiary {
    color: #00d4ff;
    text-shadow: 0 0 10px rgba(0, 212, 255, 0.5), 0 0 20px rgba(0, 212, 255, 0.3);
  }

  /* Terminal header (traffic lights) */
  .terminal-header {
    @apply flex items-center gap-2 px-4 py-3 border-b border-border;
  }

  .terminal-dot {
    @apply w-3 h-3 rounded-full;
  }

  .terminal-dot-red {
    @apply bg-destructive;
  }

  .terminal-dot-yellow {
    @apply bg-yellow-500;
  }

  .terminal-dot-green {
    @apply bg-accent;
  }

  /* Grid pattern background */
  .grid-pattern {
    background-image:
      linear-gradient(rgba(0, 255, 136, 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0, 255, 136, 0.03) 1px, transparent 1px);
    background-size: 50px 50px;
  }

  /* Holographic card effect */
  .holographic {
    position: relative;
    background: rgba(28, 28, 46, 0.3);
    border: 1px solid rgba(0, 255, 136, 0.3);
    backdrop-filter: blur(10px);
  }

  /* Corner accents */
  .corner-accent {
    position: absolute;
    width: 20px;
    height: 20px;
    border: 2px solid #00ff88;
  }

  .corner-accent-tl {
    top: -2px;
    left: -2px;
    border-right: none;
    border-bottom: none;
  }

  .corner-accent-tr {
    top: -2px;
    right: -2px;
    border-left: none;
    border-bottom: none;
  }

  .corner-accent-bl {
    bottom: -2px;
    left: -2px;
    border-right: none;
    border-top: none;
  }

  .corner-accent-br {
    bottom: -2px;
    right: -2px;
    border-left: none;
    border-top: none;
  }

  /* Blinking cursor */
  .cursor-blink {
    animation: blink 1s step-end infinite;
  }

  /* Terminal loading animations */
  .terminal-loading {
    @apply relative overflow-hidden;
  }

  .terminal-loading::after {
    content: '';
    @apply absolute bottom-0 left-0 h-[2px] bg-gradient-to-r from-transparent via-accent to-transparent;
    animation: terminalScan 2s linear infinite;
  }

  @keyframes terminalScan {
    0% { width: 0; left: 0; }
    50% { width: 100%; left: 0; }
    100% { width: 0; left: 100%; }
  }

  /* Boot progress bar */
  .boot-progress {
    @apply relative h-1 bg-border/50 overflow-hidden rounded-sm;
  }

  .boot-progress-bar {
    @apply h-full bg-gradient-to-r from-accent via-accent-tertiary to-accent-secondary;
    animation: bootProgress 3.5s ease-out forwards;
  }

  @keyframes bootProgress {
    0% { width: 0; }
    10% { width: 8%; }
    25% { width: 22%; }
    40% { width: 38%; }
    55% { width: 55%; }
    70% { width: 72%; }
    85% { width: 88%; }
    100% { width: 100%; }
  }

  /* Matrix data stream effect */
  .data-stream {
    @apply relative overflow-hidden;
  }

  .data-stream::before {
    content: '01001010110100101';
    @apply absolute top-0 left-0 font-mono text-[8px] text-accent/20 whitespace-nowrap;
    animation: dataScroll 10s linear infinite;
  }

  @keyframes dataScroll {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }

  /* Terminal typewriter effect */
  .typewriter-text {
    overflow: hidden;
    border-right: 2px solid transparent;
    white-space: nowrap;
    animation: typewriter 1s steps(40) forwards, blinkCaret 0.75s step-end infinite;
  }

  @keyframes blinkCaret {
    50% { border-color: #00ff88; }
  }

  /* Hex glow loading */
  .hex-loading {
    @apply relative;
  }

  .hex-loading::after {
    content: '';
    @apply absolute inset-0 opacity-0;
    background: radial-gradient(circle, rgba(0, 255, 136, 0.3) 0%, transparent 70%);
    animation: hexPulse 2s ease-in-out infinite;
  }

  @keyframes hexPulse {
    0%, 100% { opacity: 0; transform: scale(0.8); }
    50% { opacity: 1; transform: scale(1.2); }
  }

  /* CRT flicker effect */
  .crt-flicker {
    animation: crtFlicker 0.15s infinite;
  }

  @keyframes crtFlicker {
    0% { opacity: 0.97; }
    50% { opacity: 1; }
    100% { opacity: 0.98; }
  }

  /* Digital noise overlay */
  .digital-noise {
    @apply relative;
  }

  .digital-noise::before {
    content: '';
    @apply absolute inset-0 pointer-events-none;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: 0.03;
    mix-blend-mode: overlay;
  }

  /* Loading spinner cyberpunk style */
  .cyber-spinner {
    @apply w-6 h-6 border-2 border-accent/30 border-t-accent rounded-full;
    animation: cyberSpin 1s linear infinite;
  }

  @keyframes cyberSpin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* Scanning line effect */
  .scan-line {
    @apply relative overflow-hidden;
  }

  .scan-line::after {
    content: '';
    @apply absolute left-0 w-full h-[1px] bg-accent/50;
    animation: scanMove 3s ease-in-out infinite;
  }

  @keyframes scanMove {
    0%, 100% { top: 0; opacity: 0; }
    50% { top: 100%; opacity: 1; }
  }
}
